<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>宝可梦定制助手(小黑版)</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <a class="navbar-brand" href="https://space.bilibili.com/1777419989">
                    定制助手 <span style="font-size: small;">Fix-by <span style="text-decoration: underline;">B站乌漆麻黑h</span></span>
                </a>
                <button id="exportPS" type="button" class="btn btn-default navbar-btn" onclick="exportPS()" data-toggle="popover" data-placement="left" data-content="黏贴发送" 
                    style="position: absolute; right: 0;margin-right: 8px;">导出</button>
                </button>
                <button id="batchPS" type="button" class="btn btn-default navbar-btn" onclick="batchPS()" data-toggle="popover" data-placement="left" data-content="已添加"
                        style="position: absolute; right: 75px; margin-right: 8px;">
                    批量添加
                </button>
            </div>

        </div><!-- /.container-fluid -->
    </nav>
    <div class="container">
        <div>
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab"
                        data-toggle="tab">宝可梦基础信息</a></li>
                <li role="presentation"><a href="#ivev" aria-controls="ivev" role="tab" data-toggle="tab">努力值调整</a></li>
                <li role="presentation"><a href="#moves" aria-controls="moves" role="tab" data-toggle="tab">招式选择</a></li>
                <li role="presentation"><a href="#batch" aria-controls="batch" role="tab" data-toggle="tab">批量队伍</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="home">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                    <div id="imageContainer" style="border: 2px solid rgb(50, 124, 252); border-radius: 47%; padding: 5px; display: inline-block; overflow: hidden; border-width: 4px; margin-top: 4px;">
                                        <img id="speciesImage" src="img/Spritesimg/_n.png" alt="图片描述" width="40" height="40">
                                    </div>
                                </td>
                                <td>
                                    <div style="margin-top: 15px;">
                                    <select id="species" class="selectpicker" data-live-search="true" data-width="auto">
                                        <option>无</option>
                                    </select>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>性别</td>
                                <td>
                                    <select id="gender" class="selectpicker" data-width="auto">
                                        <option>无</option>
                                        <option>公</option>
                                        <option>母</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>道具</td>
                                <td>
                                    <select id="heldItem" class="selectpicker" data-live-search="true"
                                        data-width="auto">
                                        <option value='None'>无</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>等级</td>
                                <td>
                                    <div class="form-group">
                                        <input type="number" class="form-control" id="level" placeholder="1-100"
                                            onchange="checkNum(this, 1, 100, 100)" style="width: 6em;">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>闪光</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="isShiny">⚠️部分神兽和特定宝可梦锁闪⚠️
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>全招式</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="allMove">
                                        </label>
                                    </div>
                                </td>
                            <tr>
                                <td>全合法缎带(奖章)</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Ribbons">
                                        </label>
                                    </div>
                                </td>
                            </tr>
                                <td>球种</td>
                                <td>
                                    <select id="ball" class="selectpicker" data-live-search="true" data-width="auto">
                                        <option value='None'>默认</optional>
                                        <option value='Master Ball'>大师球</optional>
                                        <option value='Ultra Ball'>高级球</optional>
                                        <option value='Great Ball'>超级球</optional>
                                        <option value='Poké Ball'>精灵球</optional>
                                        <option value='Safari Ball'>狩猎球</optional>
                                        <option value='Net Ball'>捕网球</optional>
                                        <option value='Dive Ball'>潜水球</optional>
                                        <option value='Nest Ball'>巢穴球</optional>
                                        <option value='Repeat Ball'>重复球</optional>
                                        <option value='Timer Ball'>计时球</optional>
                                        <option value='Luxury Ball'>豪华球</optional>
                                        <option value='Premier Ball'>纪念球</optional>
                                        <option value='Dusk Ball'>黑暗球</optional>
                                        <option value='Heal Ball'>治愈球</optional>
                                        <option value='Quick Ball'>先机球</optional>
                                        <option value='Cherish Ball'>贵重球</optional>
                                        <option value='Fast Ball'>速度球</optional>
                                        <option value='Level Ball'>等级球</optional>
                                        <option value='Lure Ball'>诱饵球</optional>
                                        <option value='Heavy Ball'>沉重球</optional>
                                        <option value='Love Ball'>甜蜜球</optional>
                                        <option value='Friend Ball'>友友球</optional>
                                        <option value='Moon Ball'>月亮球</optional>
                                        <option value='Sport Ball'>竞赛球</optional>
                                        <option value='Dream Ball'>梦境球</optional>
                                        <option value='Beast Ball'>究极球</optional>
                                    </select>
                                </td>
                            </tr>
                            </tr>
                                <td>野外之证</td>
                                <td>
                                    <select id="ribbons" class="selectpicker" data-live-search="true" data-width="auto">
                                        <option value='None'>默认</optional>
                                        <option value='Lunchtime=Ture'>正午之证</option>
                                        <option value='Misty=Ture'>浓雾之证</option>
                                        <option value='Peeved=Ture'>激动之证</option>
                                        <option value='Prideful=Ture'>自信之证</option>
                                        <option value='PumpedUp=Ture'>昂扬之证</option>
                                        <option value='Rainy=Ture'>降雨之证</option>
                                        <option value='Rare=Ture'>未知之证</option>
                                        <option value='Rowdy=Ture'>淘气之证</option>
                                        <option value='Sandstorm=Ture'>沙尘之证</option>
                                        <option value='Scowling=Ture'>凶悍之证</option>
                                        <option value='SleepyTime=Ture'>午夜之证</option>
                                        <option value='Slump=Ture'>不振之证</option>
                                        <option value='Smiley=Ture'>微笑之证</option>
                                        <option value='Snowy=Ture'>降雪之证</option>
                                        <option value='Stormy=Ture'>落雷之证</option>
                                        <option value='Teary=Ture'>悲伤之证</option>
                                        <option value='Thorny=Ture'>不纯之证</option>
                                        <option value='Uncommon=Ture'>偶遇之证</option>
                                        <option value='Unsure=Ture'>自卑之证</option>
                                        <option value='Upbeat=Ture'>爽快之证</option>
                                        <option value='Vigor=Ture'>活力之证</option>
                                        <option value='ZeroEnergy=Ture'>倦怠之证</option>
                                        <option value='ZonedOut=Ture'>疏忽之证</option>
                                        <option value='AbsentMinded=Ture'>无滤之证</option>
                                        <option value='Angry=Ture'>愤怒之证</option>
                                        <option value='Blizzard=Ture'>暴雪之证</option>
                                        <option value='Calmness=Ture'>冷静之证</option>
                                        <option value='Charismatic=Ture'>领袖之证</option>
                                        <option value='Cloudy=Ture'>阴云之证</option>
                                        <option value='Crafty=Ture'>狡猾之证</option>
                                        <option value='Curry=Ture'>咖喱之证</option>
                                        <option value='Dawn=Ture'>佛晓之证</option>
                                        <option value='Destiny=Ture'>命运之证</option>
                                        <option value='Dry=Ture'>干燥之证</option>
                                        <option value='Dusk=Ture'>黄昏之证</option>
                                        <option value='Excited=Ture'>期待之证</option>
                                        <option value='Ferocious=Ture'>本能之证</option>
                                        <option value='Fishing=Ture'>上钩之证</option>
                                        <option value='Flustered=Ture'>动摇之证</option>
                                        <option value='Humble=Ture'>木讷之证</option>
                                        <option value='Intellectual=Ture'>理性之证</option>
                                        <option value='Intense=Ture'>热情之证</option>
                                        <option value='Jittery=Ture'>紧张之证</option>
                                        <option value='Joyful=Ture'>幸福之证</option>
                                        <option value='Kindly=Ture'>优雅之证</option>
                                        <option value='Itemfinder=Ture'>捡拾之证</option>
                                        <option value='Partne=Ture'>搭档之证</option>
                                        <option value='Gourmand=Ture'>美食之证</option>
                                        <option value='Mightiest=Ture'>最强之证</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>特性</td>
                                <td>
                                    <select id="ability" class="selectpicker" data-width="auto">
                                        <option>大力士</option>
                                        <option>好家伙</option>
                                        <option>梦特</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>性格</td>
                                <td>
                                    <select id="nature" class="selectpicker" data-live-search="true" data-width="auto">
                                        <option value='Hardy'>勤奋(无改变)</option>
                                        <option value='Lonely'>怕寂寞(+攻击-防御)</option>
                                        <option value='Brave'>勇敢(+攻击-速度)</option>
                                        <option value='Adamant'>固执(+攻击-特攻)</option>
                                        <option value='Naughty'>顽皮(+攻击-特防)</option>
                                        <option value='Bold'>大胆(+防御-攻击)</option>
                                        <option value='Docile'>坦率(无改变)</option>
                                        <option value='Relaxed'>悠闲(+防御-速度)</option>
                                        <option value='Impish'>淘气(+防御-特攻)</option>
                                        <option value='Lax'>乐天(+防御-特防)</option>
                                        <option value='Timid'>胆小(+速度-攻击)</option>
                                        <option value='Hasty'>急躁(+速度-防御)</option>
                                        <option value='Serious'>认真(无改变)</option>
                                        <option value='Jolly'>爽朗(+速度-特攻)</option>
                                        <option value='Naive'>天真(+速度-特防)</option>
                                        <option value='Modest'>内敛(+特攻-攻击)</option>
                                        <option value='Mild'>慢吞吞(+特攻-防御)</option>
                                        <option value='Quiet'>冷静(+特攻-速度)</option>
                                        <option value='Bashful'>害羞(无改变)</option>
                                        <option value='Rash'>马虎(+特攻-特防)</option>
                                        <option value='Calm'>温和(+特防-攻击)</option>
                                        <option value='Gentle'>温顺(+特防-防御)</option>
                                        <option value='Sassy'>自大(+特防-速度)</option>
                                        <option value='Careful'>慎重(+特防-特攻)</option>
                                        <option value='Quirky'>浮躁(无改变)</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>太晶属性</td>
                                <td>
                                    <select id="teraType" class="selectpicker" data-width="auto">
                                        <option value='None'>默认</option>
                                        <option value='Normal'>一般</option>
                                        <option value='Fighting'>格斗</option>
                                        <option value='Flying'>飞行</option>
                                        <option value='Poison'>毒</option>
                                        <option value='Ground'>地面</option>
                                        <option value='Rock'>岩石</option>
                                        <option value='Bug'>虫</option>
                                        <option value='Ghost'>幽灵</option>
                                        <option value='Steel'>钢</option>
                                        <option value='Fire'>火</option>
                                        <option value='Water'>水</option>
                                        <option value='Grass'>草</option>
                                        <option value='Electric'>电</option>
                                        <option value='Psychic'>超能力</option>
                                        <option value='Ice'>冰</option>
                                        <option value='Dragon'>龙</option>
                                        <option value='Dark'>恶</option>
                                        <option value='Fairy'>妖精</option>
                                        <option value='Stellar'>星晶</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>语言</td>
                                <td>
                                    <select id="language" class="selectpicker" data-width="auto">
                                        <option value="Japanese">日语</option>
                                        <option value="English">英语</option>
                                        <option value="French">法语</option>
                                        <option value="Italian">意大利语</option>
                                        <option value="German">德语</option>
                                        <option value="Spanish">西班牙语</option>
                                        <option value="Korean">韩语</option>
                                        <option value="ChineseS" selected>简体中文</option>
                                        <option value="ChineseT">繁体中文</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>体型</td>
                                <td>
                                    <div class="form-group">
                                        <input id="scale" type="number" class="form-control" id="level"
                                            placeholder="0-255" onchange="checkNum(this, 0, 255, 128)"
                                            style="width: 6em;">⚠️部分神兽和特定宝可梦锁体型128⚠️
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="ivev">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td style="width: 44px;"></td>
                                <td>个体值 0~31</td>
                                <td>努力值 0~252</td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">HP</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>
                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">攻击</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>

                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">防御</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>

                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">特攻</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>

                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">特防</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>

                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 44px;">速度</td>
                                <td class="iv">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 4em; display: inline;" value="31" onchange="checkNum(this, 0, 31, 31)">
                                        <input class="btn btn-info" type="button" value="最小" onclick="toNumberIV(this)">
                                    </div>

                                </td>
                                <td class="ev">
                                    <div class="form-group form-inline">
                                        <input type="number" class="form-control" placeholder=""
                                            style="width: 5em; display: inline;" onchange="checkNum(this, 0, 252, 252)">
                                        <input class="btn btn-info" type="button" value="最大"
                                            onclick="toNumberEV(this)">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="moves">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>招式1</td>
                                <td>
                                    <select id="move1" class="selectpicker" data-live-search="true" data-width="8em">
                                        <option>击掌奇袭</option>
                                        <option>喷射火焰</option>
                                        <option>龙爪</option>
                                    </select>
                                <td>满PP</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Movesup1">
                                        </label>
                                </td>
                            </tr>
                            <tr>
                                <td>招式2</td>
                                <td>
                                    <select id="move2" class="selectpicker" data-live-search="true" data-width="8em">
                                        <option>击掌奇袭</option>
                                        <option>喷射火焰</option>
                                        <option>龙爪</option>
                                    </select>
                                <td>满PP</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Movesup2">
                                        </label>
                                </td>
                            </tr>
                            <tr>
                                <td>招式3</td>
                                <td>
                                    <select id="move3" class="selectpicker" data-live-search="true" data-width="8em">
                                        <option>击掌奇袭</option>
                                        <option>喷射火焰</option>
                                        <option>龙爪</option>
                                    </select>
                                <td>满PP</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Movesup3">
                                        </label>
                                </td>
                            </tr>
                            <tr>
                                <td>招式4</td>
                                <td>
                                    <select id="move4" class="selectpicker" data-live-search="true" data-width="8em">
                                        <option>击掌奇袭</option>
                                        <option>喷射火焰</option>
                                        <option>龙爪</option>
                                    </select>
                                <td>满PP</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Movesup4">
                                        </label>
                                </td>
                            </tr>
                            <tr>
                                <td>一键全满PP</td>
                                <td>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Movesup">⚠️如已勾选此选项,上面的请勿勾选⚠️
                                        </label>
                                    </div>
                                </td>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="batch">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                    <input class="btn btn-infos" type="button" value="批量导出"
                                           onclick="exportbatchPS()">
                                    <input class="btn btn-infos2" type="button" value="清除全部"
                                           onclick="clearbatchPS()">
                                    <input class="btn btn-infos3" type="button" value="清除新增"
                                           onclick="clearfinalPS()">
                                    已添加：<span id="psVariable">0</span>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
        crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"
        integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.10/dist/clipboard.min.js"></script>
    <script src="pkdate/species.js?v=20240102"></script>
    <script src="pkdate/moves.js?v=20240305"></script>
    <script src="pkdate/ablilities.js?v=20240305"></script>
    <script src="pkdate/items.js?v=20240305"></script>
    <script>
        $(document).ready(function () {
            let $species = $("#species");
            $species.empty();
            for(let s in pk_species) {
                $("#species").append('<option value="' + s + '">' + pk_species[s][0] + '</option>');
            }
            $species.selectpicker('refresh');
            let $heldItem = $("#heldItem");
            $heldItem.empty();
            for (let i = 0; i < pk_items.length; i++) {
                $heldItem.append('<option value="' + pk_items[i][1] + '">' + pk_items[i][0] + '</option>');
            }
            refresh();
            $("#species").change(function () {
                refresh();
            });
            $("#isShiny").change(function () {
                refresh();
            });
            $("#ball").change(function () {
                refresh();
            });
        });
        function changeImage(species) {
            var selectElement = document.getElementById("species");
            var imageElement = document.getElementById("speciesImage");
            //var selectedOption = selectElement.options[selectElement.selectedIndex];
            //var imageSrc = selectedOption.getAttribute("data-image");
            var imageSrc = pk_species[species][4];
            if ($("#isShiny").prop('checked')) {
                imageSrc += "_r";
            }
            else {
                imageSrc += "_n";
            }
            imageElement.src = "img/Spritesimg/" + imageSrc + ".png";
        }
        function updateBorderColor() {
            var borderColor;
            var ballcolor = $("#ball").val();
            // 这里根据不同的数据值设置不同的边框颜色
            switch (ballcolor) {
                case "None":
                borderColor = "rgb(226,88,62)";
                    break;
                case "Master Ball":
                borderColor = "rgb(172, 28, 172)";
                    break;
                case "Ultra Ball":
                borderColor = "rgb(231, 205, 88)";
                    break;
                case "Great Ball":
                borderColor = "rgb(50, 124, 252)";
                    break;
                case "Poké Ball":
                borderColor = "rgb(226,88,62)";
                    break;
                case "Safari Ball":
                borderColor = "rgb(128, 128, 0)";
                    break;
                case "Net Ball":
                borderColor = "rgb(91, 186, 199)";
                    break;
                case "Dive Ball":
                borderColor = "rgb(123, 196, 232)";
                    break;
                case "Nest Ball":
                borderColor = "rgb(120, 190, 32)";
                    break;
                case "Repeat Ball":
                borderColor = "rgb(229,116,59)";
                    break;
                case "Timer Ball":
                borderColor = "rgb(133,104,106)"
                    break;
                case "Luxury Ball":
                borderColor = "rgb(74,82,84)";
                    break;
                case "Premier Ball":
                borderColor = "rgb(229,237,255)";
                    break;
                case "Dusk Ball":
                borderColor = "rgb(87,133,78)";
                    break;
                case "Heal Ball":
                borderColor = "rgb(242,113,217)";
                    break;
                case "Quick Ball":
                borderColor = "rgb(227,237,85)";
                    break;
                case "Cherish Ball":
                borderColor = "red";
                    break;
                case "Fast Ball":
                borderColor = "rgb(240,143,72)";
                    break;
                case "Level Ball":
                borderColor = "rgb(237,189,149)";
                    break;
                case "Lure Ball":
                borderColor = "rgb(56,164,208)";
                    break;
                case "Heavy Ball":
                borderColor = "rgb(149,167,180)";
                    break;
                case "Love Ball":
                borderColor = "rgb(250,203,233)";
                    break;
                case "Friend Ball":
                borderColor = "rgb(140,201,71)";
                    break;
                case "Moon Ball":
                borderColor = "rgb(115,160,173)";
                    break;
                case "Sport Ball":
                borderColor = "rgb(255,142,52)";
                    break;
                case "Dream Ball":
                borderColor = "rgb(255,105,151)";
                    break;
                case "Beast Ball":
                borderColor = "rgb(7,98,200)";
                    break;
                default:
                borderColor = "rgb(226,88,62)";
                    break;
                }
            document.getElementById("imageContainer").style = "border: 2px solid "+ borderColor +"; border-radius: 48%; padding: 5px; display: inline-block; overflow: hidden; border-width: 4px; margin-top: 4px;";
        }

        function refresh() {
            var species = $("#species").val();
            var gender = pk_species[species][1];
            updateBorderColor();
            changeImage(species);
            $("#gender").empty();
            if (gender == 0) {
                $("#gender").append('<option value="male">公</option>');
            } else if (gender == 254) {
                $("#gender").append('<option value="female">母</option>');
            } else if (gender == 255) {
                $("#gender").append('<option>无性别</option>');
            } else {
                $("#gender").append('<option value="male">公</option>');
                $("#gender").append('<option value="female">母</option>');
            }
            $("#gender").selectpicker('refresh');
            var abilities = pk_species[species][2];
            $("#ability").empty();
            if (pk_ablilities[[abilities[0]]][1] == pk_ablilities[[abilities[1]]][1] && pk_ablilities[[abilities[0]]][1] == pk_ablilities[[abilities[2]]][1]){
                $("#ability").append('<option value="' + pk_ablilities[[abilities[0]]][1] + '">' + pk_ablilities[abilities[0]][0] + '</option>');
            }
            else if (pk_ablilities[[abilities[0]]][1] == pk_ablilities[[abilities[1]]][1] && pk_ablilities[[abilities[0]]][1] != pk_ablilities[[abilities[2]]][1]){
                $("#ability").append('<option value="' + pk_ablilities[[abilities[0]]][1] + '">' + pk_ablilities[abilities[0]][0] + '</option>');
                $("#ability").append('<option value="' + pk_ablilities[[abilities[2]]][1] + '">' + pk_ablilities[abilities[2]][0] + '</option>');
            }
            else{
                $("#ability").append('<option value="' + pk_ablilities[[abilities[0]]][1] + '">' + pk_ablilities[abilities[0]][0] + '</option>');
                $("#ability").append('<option value="' + pk_ablilities[[abilities[1]]][1] + '">' + pk_ablilities[abilities[1]][0] + '</option>');
                $("#ability").append('<option value="' + pk_ablilities[[abilities[2]]][1] + '">' + pk_ablilities[abilities[2]][0] + '</option>');
            }
            $("#ability").selectpicker('refresh');
            refreshMoves(species);
        }

        function refreshMoves(species) {
            refreshMove($("#move1"), species);
            refreshMove($("#move2"), species);
            refreshMove($("#move3"), species);
            refreshMove($("#move4"), species);
        }
        function refreshMove($move, species) {
            $move.empty();
            var moveIndexs = pk_species[species][3];
            $move.append('<option value="None">无</option>');
            for (let i = 0; i < moveIndexs.length; i++) {
                $move.append('<option value="' + pk_moves[moveIndexs[i]][1] + '">' + pk_moves[moveIndexs[i]][0] + '</option>');
            }
            $move.selectpicker('refresh');
        }
        function checkNum(o, start, end, defaultValue) {
            var $o = $(o);
            var value = $o.val();
            if (value < start || end < value) {
                $o.val(defaultValue);
            }
        }
        function toNumberIV(o) {
            var $o = $(o);
            var $prev = $o.prev();
            if ($prev.val() == 0 || $o.val() == "最大") {
                $o.val("最小");
                $prev.val(31);
            } else {
                $o.val("最大");
                $prev.val(0);
            }
        }
        function toNumberEV(o) {
            var $o = $(o);
            if ($o.val() == "最小") {
                $o.prev().val(0);
                $o.val("最大");
                return;
            }
            var count = 0;
            var value = 252;
            $(".ev input[type='number']").each(function () {
                count += this.value == "" ? 0 : parseInt(this.value);
            });
            if (count > 510) return;
            if (count + value > 510) {
                value = 510 - count;
            }
            $o.prev().val(value);
            if (value == 0) {
                $o.val("最大");
            } else {
                $o.val("最小");
            }
        }
        function exportPS() {
            var text = "";
            var species = $("#species").val();
            text += species;
            var gender = $("#gender").val();
            if (gender == "female" && (species == "Meowstic" || species == "Indeedee" || species == "Basculegion " || species == "Oinkologne")) {
                species += "-F";
            }
            if (gender == "male") text += " (M)";
            else if (gender == "female") text += " (F)";
            var heldItem = $("#heldItem").val();
            if (heldItem != "None") {
                text += " @ " + heldItem + "\n";
            } else {
                text += "\n";
            }

            var level = $("#level").val();
            if (level != null && level > 0 && level <= 100) {
                text += "Level: " + level + "\n";
            }
            if ($("#isShiny").prop('checked')) {
                text += "Shiny: Yes\n";
            }
            if ($("#allMove").prop('checked')) {
                text += ".RelearnMoves=$suggestAll\n";
            }
            if ($("#Ribbons").prop('checked')) {
                text += ".Ribbons=$suggestAll\n";
            }
            if ($("#power").prop('checked')) {
                text += ".RibbonMarkMightiest=True\n";
            }
            if ($("#Friend").prop('checked')) {
                text += ".OT_Friendship=255\n";
            }
            if ($("#Movesup").prop('checked')) {
                text += ".Move1_PPUps=3\n.Move2_PPUps=3\n.Move3_PPUps=3\n.Move4_PPUps=3\n";
            }
            if ($("#Movesup1").prop('checked')) {
                text += ".Move1_PPUps=3\n";
            }
            if ($("#Movesup2").prop('checked')) {
                text += ".Move2_PPUps=3\n";
            }
            if ($("#Movesup3").prop('checked')) {
                text += ".Move3_PPUps=3\n";
            }
            if ($("#Movesup4").prop('checked')) {
                text += ".Move4_PPUps=3\n";
            }
            var ball = $("#ball").val();
            if (ball != "None") {
                text += "Ball: " + ball + "\n";
            }
            var ribbons = $("#ribbons").val();
            if (ribbons != "None") {
            text += ".RibbonMark" + ribbons + "\n";
            }
            var ability = $("#ability").val();
            text += "Ability: " + ability + "\n";
            var nature = $("#nature").val();
            text += nature + " Nature\n";

            var evs = $(".ev input[type='number']");
            text += "EVs: " + (evs[0].value == "" ? 0 : evs[0].value) + " HP / "
                + (evs[1].value == "" ? 0 : evs[1].value) + " ATK / "
                + (evs[2].value == "" ? 0 : evs[2].value) + " DEF / "
                + (evs[3].value == "" ? 0 : evs[3].value) + " SPA / "
                + (evs[4].value == "" ? 0 : evs[4].value) + " SPD / "
                + (evs[5].value == "" ? 0 : evs[5].value) + " SPE \n";

            var ivs = $(".iv input[type='number']");
            text += "IVs: " + (ivs[0].value == "" ? 0 : ivs[0].value) + " HP / "
                + (ivs[1].value == "" ? 0 : ivs[1].value) + " Atk / "
                + (ivs[2].value == "" ? 0 : ivs[2].value) + " Def / "
                + (ivs[3].value == "" ? 0 : ivs[3].value) + " SpA / "
                + (ivs[4].value == "" ? 0 : ivs[4].value) + " SpD / "
                + (ivs[5].value == "" ? 0 : ivs[5].value) + " Spe \n";

            var teraType = $("#teraType").val();
            if (teraType != "None")
                text += "Tera Type: " + teraType + "\n";
            var language = $("#language").val();
            text += "Language: " + language + "\n";
            var scale = $("#scale").val();
            if (scale != "" && scale >= 0 && scale <= 255) {
                text += ".Scale=" + scale + "\n";
            }

            var move1 = $("#move1").val();
            var move2 = $("#move2").val();
            var move3 = $("#move3").val();
            var move4 = $("#move4").val();
            if (move1 != "None") {
                text += "-" + move1 + "\n";
            }
            if (move2 != "None") {
                text += "-" + move2 + "\n";
            }
            if (move3 != "None") {
                text += "-" + move3 + "\n";
            }
            if (move4 != "None") {
                text += "-" + move4 + "\n";
            }
            new ClipboardJS("#exportPS");
            $("#exportPS").attr("data-clipboard-text", text);
            $("#exportPS").popover("show");
            setTimeout(function(){$("#exportPS").popover("hide");}, 2000);
            console.log(text);
        }
        var psnum = 0;
        //批量添加宝可梦
        function batchPS() {
            psnum++;
            var text = "";
            var species = $("#species").val();
            text += species;
            var gender = $("#gender").val();
            if (gender == "female" && (species == "Meowstic" || species == "Indeedee" || species == "Basculegion " || species == "Oinkologne")) {
                species += "-F";
            }
            if (gender == "male") text += " (M)";
            else if (gender == "female") text += " (F)";
            var heldItem = $("#heldItem").val();
            if (heldItem != "None") {
                text += " @ " + heldItem + "\n<br>";
            } else {
                text += "\n<br>";
            }

            var level = $("#level").val();
            if (level != null && level > 0 && level <= 100) {
                text += "Level: " + level + "\n";
            }
            if ($("#isShiny").prop('checked')) {
                text += "Shiny: Yes\n";
            }
            if ($("#allMove").prop('checked')) {
                text += ".RelearnMoves=$suggestAll\n";
            }
            if ($("#Ribbons").prop('checked')) {
                text += ".Ribbons=$suggestAll\n";
            }
            if ($("#Friend").prop('checked')) {
                text += ".OT_Friendship=255\n";
            }
            if ($("#Movesup").prop('checked')) {
                text += ".Move1_PPUps=3\n.Move2_PPUps=3\n.Move3_PPUps=3\n.Move4_PPUps=3\n";
            }
            if ($("#Movesup1").prop('checked')) {
                text += ".Move1_PPUps=3\n";
            }
            if ($("#Movesup2").prop('checked')) {
                text += ".Move2_PPUps=3\n";
            }
            if ($("#Movesup3").prop('checked')) {
                text += ".Move3_PPUps=3\n";
            }
            if ($("#Movesup4").prop('checked')) {
                text += ".Move4_PPUps=3\n";
            }
            var ball = $("#ball").val();
            if (ball != "None") {
                text += "Ball: " + ball + "\n";
            }
            var ribbons = $("#ribbons").val();
            text += ".RibbonMark" + ribbons + "\n";
            var ability = $("#ability").val();
            text += "Ability: " + ability + "\n";
            var nature = $("#nature").val();
            text += nature + " Nature\n";

            var evs = $(".ev input[type='number']");
            text += "EVs: " + (evs[0].value == "" ? 0 : evs[0].value) + " HP / "
                + (evs[1].value == "" ? 0 : evs[1].value) + " Atk / "
                + (evs[2].value == "" ? 0 : evs[2].value) + " Def / "
                + (evs[3].value == "" ? 0 : evs[3].value) + " SpA / "
                + (evs[4].value == "" ? 0 : evs[4].value) + " SpD / "
                + (evs[5].value == "" ? 0 : evs[5].value) + " Spe \n<br>";

            var ivs = $(".iv input[type='number']");
            text += "IVs: " + (ivs[0].value == "" ? 0 : ivs[0].value) + " HP / "
                + (ivs[1].value == "" ? 0 : ivs[1].value) + " Atk / "
                + (ivs[2].value == "" ? 0 : ivs[2].value) + " Def / "
                + (ivs[3].value == "" ? 0 : ivs[3].value) + " SpA / "
                + (ivs[4].value == "" ? 0 : ivs[4].value) + " SpD / "
                + (ivs[5].value == "" ? 0 : ivs[5].value) + " Spe \n<br>";

            var teraType = $("#teraType").val();
            if (teraType != "None")
                text += "Tera Type: " + teraType + "\n<br>";
            var language = $("#language").val();
            text += "Language: " + language + "\n<br>";
            var scale = $("#scale").val();
            if (scale != "" && scale >= 0 && scale <= 255) {
                text += ".Scale=" + scale + "\n<br>";
            }

            var move1 = $("#move1").val();
            var move2 = $("#move2").val();
            var move3 = $("#move3").val();
            var move4 = $("#move4").val();
            if (move1 != "None") {
                text += "-" + move1 + "\n<br>";
            }
            if (move2 != "None") {
                text += "-" + move2 + "\n<br>";
            }
            if (move3 != "None") {
                text += "-" + move3 + "\n<br>";
            }
            if (move4 != "None") {
                text += "-" + move4 + "\n<br>";
            }
            text += "\n<br>";
            text += "\n<br>";
            $("#batch .table").append('<h5>' + text + '</h5>');
            $("#batchPS").popover("show");
            setTimeout(function () { $("#batchPS").popover("hide"); }, 2000);
            document.getElementById("psVariable").textContent = psnum;
            console.log(text);
        }
        function exportbatchPS() {
            var ps = "";
            $(".table h5").each(function () {
                ps += $(this).text().trim() + " " + "\n\n"; // 获取每个<h5>元素的文本内容并添加到ps变量中
            });
            
            if (psnum == 0) {
                showPopover($(".btn.btn-infos"), "尚未添加宝可梦进入批量列表");
            }
            else {
                ps = ps.substring(0, ps.length-3);
                new ClipboardJS(".btn.btn-infos");
                $(".btn.btn-infos").attr("data-clipboard-text", ps);
                showPopover($(".btn.btn-infos"), "批量宝可梦已复制到剪贴板");
                console.log(ps);
            }
        }
        function clearbatchPS() {
            if (psnum == 0) {
                showPopover($(".btn.btn-infos2"), "尚未添加宝可梦进入批量列表");
            }
            else {
                psnum = 0;
                document.getElementById("psVariable").textContent = psnum;
                showPopover($(".btn.btn-infos2"), "已全部清除");
                $(".table h5").empty();
            }
        }
        function clearfinalPS() {
            if (psnum == 0) {
                showPopover($(".btn.btn-infos3"), "尚未添加宝可梦进入批量列表");
            }
            else {
                // 找到所有的 <h5> 元素
                var h5Elements = document.querySelectorAll('#batch .table h5');

                // 如果存在要清除的元素，则移除最后一个 <h5> 元素
                if (h5Elements.length > 0) {
                    h5Elements[h5Elements.length - 1].remove();
                    psnum--;
                    document.getElementById("psVariable").textContent = psnum;
                    showPopover($(".btn.btn-infos3"), "已清除新增宝可梦");
                }
            }
        }
        function showPopover(target, msg) {
            target.attr("data-original-title", msg);
            $('[data-toggle="tooltip"]').tooltip();
            target.tooltip('show');
            target.focus();
            //2秒后消失提示框
            var id = setTimeout(
                function () {
                    target.attr("data-original-title", "");
                    target.tooltip('hide');
                }, 2000
            );
        }
    </script>
</body>

</html>
